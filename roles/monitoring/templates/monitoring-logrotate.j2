# Log rotation for PowerDNS monitoring logs
# Generated by Ansible on {{ ansible_date_time.iso8601 }}

/var/log/monitoring/*.log {
    daily
    missingok
    rotate 30
    compress
    delaycompress
    notifempty
    create 0644 root root
    postrotate
        # Restart rsyslog if it's running
        if [ -f /var/run/rsyslogd.pid ]; then
            /usr/bin/killall -HUP rsyslogd
        fi
    endscript
}

/var/log/monitoring/powerdns-monitor.log {
    daily
    missingok
    rotate 14
    compress
    delaycompress
    notifempty
    create 0644 root root
    size 100M
}

/var/log/monitoring/system-monitor.log {
    daily
    missingok
    rotate 7
    compress
    delaycompress
    notifempty
    create 0644 root root
    size 50M
}

/var/log/monitoring/dns-monitor.log {
    hourly
    missingok
    rotate 24
    compress
    delaycompress
    notifempty
    create 0644 root root
    size 10M
}
